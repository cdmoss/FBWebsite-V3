@page
@model MHFoodBank.Web.Areas.Volunteer.Pages.VolunteerCalendarModel
@using MHFoodBank.Common;
@using MHFoodBank.Common.Dtos;
@using Microsoft.AspNetCore.Antiforgery;
@using Syncfusion.EJ2
@inject IAntiforgery antiForgery
@{
    ViewData["Title"] = "VolunteerCalendar";
    Layout = "~/Areas/Volunteer/Pages/Shared/_Layout.cshtml";
}

@{
    var myShiftManager = new DataManager
    {
        Url = "VolunteerCalendar?handler=GetMyShifts",
        Adaptor = "UrlAdaptor",
        CrossDomain = true,
        Headers = new object[] { new { RequestVerificationToken = antiForgery.GetTokens(HttpContext).RequestToken } }
    };

    var openShiftManager = new DataManager
    {
        Url = "VolunteerCalendar?handler=GetOpenShifts",
        Adaptor = "UrlAdaptor",
        CrossDomain = true,
        Headers = new object[] { new { RequestVerificationToken = antiForgery.GetTokens(HttpContext).RequestToken } }
    };
}

<div style="width: 97%; margin: auto;">
    <ul class="nav nav-tabs" id="schedules" role="tablist">
        <li class="nav-item">
            <a data-toggle="tab" id="open-tab-tab" href="#open-tab" role="tab" class="nav-link active" aria-controls="open-tab" aria-selected="false">Open Shifts</a>
        </li>
        <li class="nav-item">
            <a data-toggle="tab" id="my-tab-tab" href="#my-tab" role="tab" class="nav-link" aria-controls="my-tab" aria-selected="true">My Shifts</a>
        </li>
    </ul>

    <div class="tab-content mt-3">
        <div id="open-tab" style="height: 85vh;" class="tab-pane fade show active" role="tabpanel" aria-labelledby="open-tab-tab">
            <ejs-schedule id="open-schedule" selectedDate="DateTime.Now" width="100%" height="100%">
                <e-schedule-eventsettings dataSource="openShiftManager">
                </e-schedule-eventsettings>
            </ejs-schedule>
        </div>
        <div id="my-tab" style="height: 85vh;" class="tab-pane fade" role="tabpanel" aria-labelledby="my-tab-tab">
            <ejs-schedule id="my-schedule" selectedDate="DateTime.Now" width="100%" height="100%" readonly="true">
                <e-schedule-eventsettings dataSource="myShiftManager">
                </e-schedule-eventsettings>
            </ejs-schedule>
        </div>
    </div>
</div>

@*selectedDate="DateTime.Now" showQuickInfo="false" width="100%" height="100%" popupOpen="onPopupOpen" editorTemplate="#ShiftEditorTemplate" actionBegin="onActionBegin"*@
